/*
  Copyright 2010 Google Inc.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
*/
var google=google||{};google.bookmarkbubble=google.bookmarkbubble||{},google.bind=function(e,o){return function(){return e.apply(o,arguments)}},google.abstractMethod=function(){throw Error("Unimplemented abstract method.")},google.bookmarkbubble.Bubble=function(){this.boundScrollHandler_=google.bind(this.setPosition,this),this.element_=null,this.hasBeenDestroyed_=!1},google.bookmarkbubble.Bubble.prototype.showIfAllowed=function(){return this.isAllowedToShow_()?(this.show_(),!0):!1},google.bookmarkbubble.Bubble.prototype.showIfAllowedWhenLoaded=function(e){if(!this.isAllowedToShow_())return!1;var o=this,t=o.loadImg_=document.createElement("img");return t.src=o.getIconUrl_(),t.onload=function(){t.complete&&(delete o.loadImg_,t.onload=null,o.show_(),e&&e())},t.onload(),!0},google.bookmarkbubble.Bubble.prototype.setHashParameter=google.abstractMethod,google.bookmarkbubble.Bubble.prototype.hasHashParameter=google.abstractMethod,google.bookmarkbubble.Bubble.prototype.NUMBER_OF_TIMES_TO_DISMISS=2,google.bookmarkbubble.Bubble.prototype.TIME_UNTIL_AUTO_DESTRUCT=15e3,google.bookmarkbubble.Bubble.prototype.LOCAL_STORAGE_PREFIX="BOOKMARK_",google.bookmarkbubble.Bubble.prototype.DISMISSED_="DISMISSED_COUNT",google.bookmarkbubble.Bubble.prototype.IMAGE_ARROW_DATA_URL_="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAATCAMAAABSrFY3AAABKVBMVEUAAAD///8AAAAAAAAAAAAAAAAAAADf398AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD09PQAAAAAAAAAAAC9vb0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD19fUAAAAAAAAAAAAAAADq6uoAAAAAAAAAAAC8vLzU1NTT09MAAADg4OAAAADs7OwAAAAAAAAAAAD///+cueenwerA0vC1y+3a5fb5+/3t8vr4+v3w9PuwyOy3zO3h6vfh6vjq8Pqkv+mat+fE1fHB0/Cduuifu+iuxuuivemrxOvC1PDz9vzJ2fKpwuqmwOrb5vapw+q/0vDf6ffK2vLN3PPprJISAAAAQHRSTlMAAAEGExES7FM+JhUoQSxIRwMbNfkJUgXXBE4kDQIMHSA0Tw4xIToeTSc4Chz4OyIjPfI3QD/X5OZR6zzwLSUPrm1y3gAAAQZJREFUeF5lzsVyw0AURNE3IMsgmZmZgszQZoeZOf//EYlG5Yrhbs+im4Dj7slM5wBJ4OJ+undAUr68gK/Hyb6Bcp5yBR/w8jreNeAr5Eg2XE7g6e2/0z6cGw1JQhpmHP3u5aiPPnTTkIK48Hj9Op7bD3btAXTfgUdwYjwSDCVXMbizO0O4uDY/x4kYC5SWFnfC6N1a9RCO7i2XEmQJj2mHK1Hgp9Vq3QBRl9shuBLGhcNtHexcdQCnDUoUGetxDD+H2DQNG2xh6uAWgG2/17o1EmLqYH0Xej0UjHAaFxZIV6rJ/WK1kg7QZH8HU02zmdJinKZJaDV3TVMjM5Q9yiqYpUwiMwa/1apDXTNESjsAAAAASUVORK5CYII=",google.bookmarkbubble.Bubble.prototype.IMAGE_CLOSE_DATA_URL_="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAALVBMVEXM3fm+1Pfb5/rF2fjw9f23z/aavPOhwfTp8PyTt/L3+v7T4vqMs/K7zP////+qRWzhAAAAXElEQVQIW2O4CwUM996BwVskxtOqd++2rwMyPI+ve31GD8h4Madqz2mwms5jZ/aBGS/mHIDoen3m+DowY8/hOVUgxusz+zqPg7SvPA1UxQfSvu/du0YUK2AMmDMA5H1qhVX33T8AAAAASUVORK5CYII=",google.bookmarkbubble.Bubble.prototype.REL_ICON_="apple-touch-icon-precomposed",google.bookmarkbubble.Bubble.prototype.MOBILE_SAFARI_USERAGENT_REGEX_=/iPhone|iPod|iPad/,google.bookmarkbubble.Bubble.prototype.IPAD_USERAGENT_REGEX_=/iPad/,google.bookmarkbubble.Bubble.prototype.isAllowedToShow_=function(){return this.isMobileSafari_()&&!this.hasBeenDismissedTooManyTimes_()&&!this.isFullscreen_()&&!this.hasHashParameter()},google.bookmarkbubble.Bubble.prototype.show_=function(){this.element_=this.build_(),document.body.appendChild(this.element_),this.element_.style.WebkitTransform="translateY("+this.getHiddenYPosition_()+"px)",this.setHashParameter(),window.setTimeout(this.boundScrollHandler_,1),window.addEventListener("scroll",this.boundScrollHandler_,!1),window.setTimeout(google.bind(this.autoDestruct_,this),this.TIME_UNTIL_AUTO_DESTRUCT)},google.bookmarkbubble.Bubble.prototype.destroy=function(){this.hasBeenDestroyed_||(window.removeEventListener("scroll",this.boundScrollHandler_,!1),this.element_&&this.element_.parentNode==document.body&&(document.body.removeChild(this.element_),this.element_=null),this.hasBeenDestroyed_=!0)},google.bookmarkbubble.Bubble.prototype.rememberDismissal_=function(){if(window.localStorage)try{var e=this.LOCAL_STORAGE_PREFIX+this.DISMISSED_,o=Number(window.localStorage[e])||0;window.localStorage[e]=String(o+1)}catch(t){}},google.bookmarkbubble.Bubble.prototype.hasBeenDismissedTooManyTimes_=function(){if(!window.localStorage)return!0;try{var e=this.LOCAL_STORAGE_PREFIX+this.DISMISSED_,o=Number(window.localStorage[e])||0;return o>=this.NUMBER_OF_TIMES_TO_DISMISS}catch(t){return!0}},google.bookmarkbubble.Bubble.prototype.isFullscreen_=function(){return!!window.navigator.standalone},google.bookmarkbubble.Bubble.prototype.isMobileSafari_=function(){return this.MOBILE_SAFARI_USERAGENT_REGEX_.test(window.navigator.userAgent)},google.bookmarkbubble.Bubble.prototype.isIpad_=function(){return this.IPAD_USERAGENT_REGEX_.test(window.navigator.userAgent)},google.bookmarkbubble.Bubble.prototype.setPosition=function(){this.element_.style.WebkitTransition="-webkit-transform 0.7s ease-out",this.element_.style.WebkitTransform="translateY("+this.getVisibleYPosition_()+"px)"},google.bookmarkbubble.Bubble.prototype.closeClickHandler_=function(){this.destroy(),this.rememberDismissal_()},google.bookmarkbubble.Bubble.prototype.autoDestruct_=function(){this.hasBeenDestroyed_||(this.element_.style.WebkitTransition="-webkit-transform 0.7s ease-in",this.element_.style.WebkitTransform="translateY("+this.getHiddenYPosition_()+"px)",window.setTimeout(google.bind(this.destroy,this),700))},google.bookmarkbubble.Bubble.prototype.getVisibleYPosition_=function(){return this.isIpad_()?window.pageYOffset+17:window.pageYOffset-this.element_.offsetHeight+window.innerHeight-17},google.bookmarkbubble.Bubble.prototype.getHiddenYPosition_=function(){return this.isIpad_()?window.pageYOffset-this.element_.offsetHeight:window.pageYOffset+window.innerHeight},google.bookmarkbubble.Bubble.prototype.iconUrl_,google.bookmarkbubble.Bubble.prototype.getIconUrl_=function(){if(!this.iconUrl_){var e=this.getLink(this.REL_ICON_);e&&(this.iconUrl_=e.href)||(this.iconUrl_="data:image/png;base64,")}return this.iconUrl_},google.bookmarkbubble.Bubble.prototype.getLink=function(e){e=e.toLowerCase();for(var o=document.getElementsByTagName("link"),t=0;t<o.length;++t){var A=o[t];if(A.getAttribute("rel").toLowerCase()==e)return A}return null},google.bookmarkbubble.Bubble.prototype.build_=function(){var e=document.createElement("div"),o=this.isIpad_();e.style.position="absolute",e.style.zIndex=1e3,e.style.width="100%",e.style.left="0",e.style.top="0";var t=document.createElement("div");t.style.position="relative",t.style.width="214px",t.style.margin=o?"0 0 0 82px":"0 auto",t.style.border="2px solid #fff",t.style.padding="20px 20px 20px 10px",t.style.WebkitBorderRadius="8px",t.style.WebkitBoxShadow="0 0 8px rgba(0, 0, 0, 0.7)",t.style.WebkitBackgroundSize="100% 8px",t.style.backgroundColor="#b0c8ec",t.style.background="from(#cddcf3), to(#b3caed)) no-repeat top",t.style.font="13px/17px sans-serif",e.appendChild(t),t.innerHTML="Install this web app on your phone: tap <b style=\"font-size:15px\">+</b> and then <b>'Add to Home Screen'</b>";var A=document.createElement("div");A.style["float"]="left",A.style.width="55px",A.style.height="55px",A.style.margin="-2px 7px 3px 5px",A.style.background="#fff url("+this.getIconUrl_()+") no-repeat -1px -1px",A.style.WebkitBackgroundSize="57px",A.style.WebkitBorderRadius="10px",A.style.WebkitBoxShadow="0 2px 5px rgba(0, 0, 0, 0.4)",t.insertBefore(A,t.firstChild);var l=document.createElement("div");l.style.backgroundImage="url("+this.IMAGE_ARROW_DATA_URL_+")",l.style.width="25px",l.style.height="19px",l.style.position="absolute",l.style.left="111px",o?(l.style.WebkitTransform="rotate(180deg)",l.style.top="-19px"):l.style.bottom="-19px",t.appendChild(l);var i=document.createElement("a");return i.onclick=google.bind(this.closeClickHandler_,this),i.style.position="absolute",i.style.display="block",i.style.top="-3px",i.style.right="-3px",i.style.width="16px",i.style.height="16px",i.style.border="10px solid transparent",i.style.background="url("+this.IMAGE_CLOSE_DATA_URL_+") no-repeat",t.appendChild(i),e};