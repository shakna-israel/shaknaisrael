!function(t){window.MBP=window.MBP||{},MBP.viewportmeta=t.querySelector&&t.querySelector('meta[name="viewport"]'),MBP.ua=navigator.userAgent,MBP.scaleFix=function(){MBP.viewportmeta&&/iPhone|iPad/.test(MBP.ua)&&!/Opera Mini/.test(MBP.ua)&&(MBP.viewportmeta.content="width=device-width, minimum-scale=1.0, maximum-scale=1.0",t.addEventListener("gesturestart",MBP.gestureStart,!1))},MBP.gestureStart=function(){MBP.viewportmeta.content="width=device-width, minimum-scale=0.25, maximum-scale=1.6"},MBP.hideUrlBar=function(){var t=window,e=t.document;if(!location.hash||!t.addEventListener){window.scrollTo(0,1);var o=1,n=setInterval(function(){e.body&&(clearInterval(n),o="scrollTop"in e.body?e.body.scrollTop:1,t.scrollTo(0,1===o?0:1))},15);t.addEventListener("load",function(){setTimeout(function(){t.scrollTo(0,1===o?0:1)},0)},!1)}},MBP.fastButton=function(t,e){this.element=t,this.handler=e,t.addEventListener&&(t.addEventListener("touchstart",this,!1),t.addEventListener("click",this,!1))},MBP.fastButton.prototype.handleEvent=function(t){switch(t.type){case"touchstart":this.onTouchStart(t);break;case"touchmove":this.onTouchMove(t);break;case"touchend":this.onClick(t);break;case"click":this.onClick(t)}},MBP.fastButton.prototype.onTouchStart=function(e){e.stopPropagation(),this.element.addEventListener("touchend",this,!1),t.body.addEventListener("touchmove",this,!1),this.startX=e.touches[0].clientX,this.startY=e.touches[0].clientY,this.element.style.backgroundColor="rgba(0,0,0,.7)"},MBP.fastButton.prototype.onTouchMove=function(t){(Math.abs(t.touches[0].clientX-this.startX)>10||Math.abs(t.touches[0].clientY-this.startY)>10)&&this.reset()},MBP.fastButton.prototype.onClick=function(t){t.stopPropagation(),this.reset(),this.handler(t),"touchend"==t.type&&MBP.preventGhostClick(this.startX,this.startY),this.element.style.backgroundColor=""},MBP.fastButton.prototype.reset=function(){this.element.removeEventListener("touchend",this,!1),t.body.removeEventListener("touchmove",this,!1),this.element.style.backgroundColor=""},MBP.preventGhostClick=function(t,e){MBP.coords.push(t,e),window.setTimeout(function(){MBP.coords.splice(0,2)},2500)},MBP.ghostClickHandler=function(t){for(var e=0,o=MBP.coords.length;o>e;e+=2){var n=MBP.coords[e],i=MBP.coords[e+1];Math.abs(t.clientX-n)<25&&Math.abs(t.clientY-i)<25&&(t.stopPropagation(),t.preventDefault())}},t.addEventListener&&t.addEventListener("click",MBP.ghostClickHandler,!0),MBP.coords=[],MBP.splash=function(){var e="iPad"===navigator.platform?"h/":"l/";t.write('<link rel="apple-touch-startup-image" href="/img/'+e+'splash.png" />')},MBP.autogrow=function(t,e){function o(){var t=this.scrollHeight,e=this.clientHeight;t>e&&(this.style.height=t+3*i+"px")}var n=e?e:12,i=t.currentStyle?t.currentStyle.lineHeight:getComputedStyle(t,null).lineHeight;i=-1==i.indexOf("px")?n:parseInt(i,10),t.style.overflow="hidden",t.addEventListener?t.addEventListener("keyup",o,!1):t.attachEvent("onkeyup",o)}}(document);